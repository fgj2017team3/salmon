// Stone.cs 
//
// @idev Unity2017.1.0f3 / MonoDevelop5.9.6
// @auth FCEI.No-Va
// @date 2017/08/19
//
// Copyright (C) 2017 FlyteCatEmotion Inc.
// All Rights Reserved.
//------------------------------------------------------------------------------------------------------------------------
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

//----------------------------------------------------------------------------------------------------
// 石ころの管理  
//----------------------------------------------------------------------------------------------------
public class Stone : MonoBehaviour
{
	//--------------------------------------------------------------------------------
	// メンバ変数  
	//--------------------------------------------------------------------------------
	static List<Stone> stones = new List<Stone>();		// 石リスト 

	[SerializeField]BoxCollider2D collid;				// 当たり判定 



	//--------------------------------------------------------------------------------
	// コンストラクタ 
	//--------------------------------------------------------------------------------
	void Awake (){ stones.Add(this); }

	//--------------------------------------------------------------------------------
	// デストラクタ 
	//--------------------------------------------------------------------------------
	void OnDestroy(){ stones.Remove(this); }



	//--------------------------------------------------------------------------------
	// 指定したポジションが石なのかどうか調べる 
	//--------------------------------------------------------------------------------
	public static bool CheckStones (float x, float y)
	{
		foreach(Stone s in stones){
			if(s.IsStone(x,y)){ return true; }
		}

		return false;
	}



	//--------------------------------------------------------------------------------
	// 指定したポジションが石なのかどうか調べる(個別) 
	//--------------------------------------------------------------------------------
	public bool IsStone (float x, float y)
	{
		return collid.OverlapPoint(new Vector2(x,y));
	}
}
